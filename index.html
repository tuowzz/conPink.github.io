<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>M-BLITHE ‡∏Ñ‡∏≠‡∏ô‡∏ã‡∏µ‡∏•‡πÄ‡∏•‡∏≠‡∏£‡πå | Shopee Vibe</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <!-- Facebook Pixel -->
  <script>
    !function(f,b,e,v,n,t,s){
      if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '127978927946856');
    fbq('track', 'PageView');
    fbq('track', 'ViewContent');
  </script>
  <noscript>
    <img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=127978927946856&ev=PageView&noscript=1"/>
  </noscript>
  <!-- TikTok Pixel -->
  <script>
    !function (w, d, t) {
      w.TiktokAnalyticsObject = t;
      var ttq = w[t] = w[t] || [];
      ttq.methods = ["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie"];
      ttq.setAndDefer = function (t, e) { t[e] = function () { t.push([e].concat(Array.prototype.slice.call(arguments, 0))) } };
      for (var i = 0; i < ttq.methods.length; i++) { ttq.setAndDefer(ttq, ttq.methods[i]) }
      ttq.instance = function (t) { for (var e = ttq._i[t] || [], n = 0; n < ttq.methods.length; n++) { ttq.setAndDefer(e, ttq.methods[n]) } return e };
      ttq.load = function (e, n) {
        var i = "https://analytics.tiktok.com/i18n/pixel/events.js";
        ttq._i = ttq._i || {};
        ttq._i[e] = [];
        ttq._i[e]._u = i;
        ttq._t = ttq._t || {};
        ttq._t[e] = +new Date;
        ttq._o = ttq._o || {};
        ttq._o[e] = n || {};
        var o = document.createElement("script");
        o.type = "text/javascript";
        o.async = !0;
        o.src = i + "?sdkid=" + e + "&lib=" + t;
        var a = document.getElementsByTagName("script")[0];
        a.parentNode.insertBefore(o, a)
      };
      ttq.load('D0EVS2JC77U9C23772EG');
      ttq.page();
      ttq.track('ViewContent');
    }(window, document, 'ttq');
  </script>
  <!-- Google Ads Pixel (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=AW-17035064059"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'AW-17035064059');
  </script>
  <style>
    /* ...‡∏ß‡∏≤‡∏á CSS ‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ... */
  </style>
</head>
<body>
  <div class="header-bar">
    <i class="fa-solid fa-bag-shopping"></i> M-BLITHE Official Store
  </div>
  <div class="product-card">
    <span class="shop-badge"><i class="fa-solid fa-check"></i> Official</span>
    <img src="photo_2025-06-10_00-30-00.jpg" class="product-img" alt="M-BLITHE ‡∏Ñ‡∏≠‡∏ô‡∏ã‡∏µ‡∏•‡πÄ‡∏•‡∏≠‡∏£‡πå" />
    <div class="product-details">
      <div class="product-title">‡∏Ñ‡∏≠‡∏ô‡∏ã‡∏µ‡∏•‡πÄ‡∏•‡∏≠‡∏£‡πå M-BLITHE ‡∏õ‡∏Å‡∏õ‡∏¥‡∏î‡∏ù‡πâ‡∏≤ ‡∏Å‡∏£‡∏∞ ‡∏£‡∏≠‡∏¢‡∏™‡∏¥‡∏ß‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô‡∏Å‡∏£‡∏¥‡∏ö</div>
      <div class="rating-row">
        <i class="fa-solid fa-star"></i> 4.9 | ‡∏Ç‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß 9,000+
      </div>
      <div class="price-row">
        ‡∏ø299 <span class="old-price">‡∏ø390</span>
      </div>
      <div class="badges">
        <span class="badge">‡∏™‡πà‡∏á‡∏ü‡∏£‡∏µ</span>
        <span class="badge">‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏°</span>
        <span class="badge">‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á</span>
      </div>
      <div class="scarcity">üî• ‡πÇ‡∏õ‡∏£‡∏ô‡∏µ‡πâ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ <b>7 ‡∏ä‡∏¥‡πâ‡∏ô</b> ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô!</div>
      <div>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏â‡∏î‡∏™‡∏µ:</div>
      <div class="options-container" id="optionsContainer"></div>
      <ul class="benefits-list">
        <li>‚úÖ ‡∏õ‡∏Å‡∏õ‡∏¥‡∏î‡πÅ‡∏ô‡∏ö‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏£‡∏≤‡∏ö</li>
        <li>üí¶ ‡∏Å‡∏±‡∏ô‡∏ô‡πâ‡∏≥ ‡∏Å‡∏±‡∏ô‡πÄ‡∏´‡∏á‡∏∑‡πà‡∏≠ ‡∏ï‡∏¥‡∏î‡∏ó‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏ß‡∏±‡∏ô</li>
        <li>‚ú® ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ö‡∏≤‡∏á‡πÄ‡∏ö‡∏≤ ‡πÑ‡∏°‡πà‡∏≠‡∏∏‡∏î‡∏ï‡∏±‡∏ô</li>
        <li>üåø ‡∏≠‡πà‡∏≠‡∏ô‡πÇ‡∏¢‡∏ô‡∏ï‡πà‡∏≠‡∏ú‡∏¥‡∏ß</li>
      </ul>
      <div class="review-box">
        <div class="review-header"><i class="fa-solid fa-user"></i> P***a</div>
        ‡∏õ‡∏Å‡∏õ‡∏¥‡∏î‡∏î‡∏µ‡∏°‡∏≤‡∏Å ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏ä‡∏≠‡∏ö‡∏°‡∏≤‡∏Å ‡∏™‡πà‡∏á‡πÄ‡∏£‡πá‡∏ß‡∏î‡πâ‡∏ß‡∏¢
      </div>
      <div class="review-box">
        <div class="review-header"><i class="fa-solid fa-user"></i> K***n</div>
        ‡πÉ‡∏ä‡πâ‡∏°‡∏≤‡∏´‡∏•‡∏≤‡∏¢‡πÅ‡∏ó‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡∏ï‡∏¥‡∏î‡∏ó‡∏ô ‡∏´‡∏ô‡πâ‡∏≤‡∏°‡∏±‡∏ô‡∏Å‡πá‡πÑ‡∏°‡πà‡∏´‡∏•‡∏∏‡∏î
      </div>
      <div class="product-actions">
        <button class="buy-btn" id="buyNowBtn"><i class="fa-solid fa-cart-shopping"></i> ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏•‡∏¢</button>
        <a href="https://lin.ee/wKelfsp" target="_blank" class="line-btn" id="lineBtn1">
          <i class="fa-brands fa-line"></i> ‡πÅ‡∏≠‡∏î‡πÑ‡∏•‡∏ô‡πå‡∏£‡∏±‡∏ö‡πÇ‡∏õ‡∏£
        </a>
      </div>
    </div>
  </div>
  <!-- Footer bar -->
  <div class="footer-bar">
    <a href="https://lin.ee/wKelfsp" target="_blank" class="line-btn" id="lineBtn2">
      <i class="fa-brands fa-line"></i> ‡πÅ‡∏≠‡∏î‡πÑ‡∏•‡∏ô‡πå
    </a>
    <button class="buy-btn" id="buyNowBtn2">
      <i class="fa-solid fa-cart-shopping"></i> ‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏•‡∏¢
    </button>
  </div>
  <!-- MODAL ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ (‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°) -->
  <div class="modal-overlay" id="buyNowModal">
    <div class="modal-content">
      <i class="fas fa-times close-btn" id="closeModalBtn"></i>
      <div class="modal-header">
        <img src="photo_2025-06-10_00-30-00.jpg" alt="Product Thumbnail">
        <div>
          <div class="modal-header-title">M-BLITHE ‡∏Ñ‡∏≠‡∏ô‡∏ã‡∏µ‡∏•‡πÄ‡∏•‡∏≠‡∏£‡πå</div>
          <div class="modal-header-price">‡∏ø299</div>
          <div class="modal-selection-text">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏â‡∏î‡∏™‡∏µ</div>
        </div>
      </div>
      <!-- ‡πÄ‡∏â‡∏î‡∏™‡∏µ -->
      <div class="options-container" id="modalOptionsContainer"></div>
      <form id="orderForm" onsubmit="sendOrderToSheet(event);" autocomplete="off">
        <input type="hidden" name="product" id="productInput" required>
        <label for="name">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
        <input type="text" id="name" name="name" required placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•">
        <label for="phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
        <input type="text" id="phone" name="phone" required placeholder="‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: 0812345678" pattern="^[0-9]{10}$" title="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå 10 ‡∏´‡∏•‡∏±‡∏Å">
        <label for="address">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</label>
        <textarea id="address" name="address" rows="3" required placeholder="‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà, ‡∏ñ‡∏ô‡∏ô, ‡∏ï‡∏≥‡∏ö‡∏•, ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠, ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î, ‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå"></textarea>
        <button type="submit" class="modal-submit-btn" id="submitBtn">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</button>
      </form>
    </div>
  </div>
  <!-- Popup Success -->
  <div id="successPopup">
    <i class="fas fa-check-circle"></i>
    <p>‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</p>
    <span style="color:#222;font-weight:400;display:block;margin-top:7px;">‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</span>
  </div>
  <script>
    // Shopee Vibe + ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏î‡∏¥‡∏°
    const GOOGLE_SHEET_WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbxvkT44c1V26IyzQW_4FhR4iQ0gmrNvdhF5TnneqNZ-21JXFczyZBo-8EFzhA69WshT/exec';
    const products = [
      { id: 'B01', text: 'B01 - ‡∏ú‡∏¥‡∏ß‡∏Ç‡∏≤‡∏ß‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á' },
      { id: 'B02', text: 'B02 - ‡∏ú‡∏¥‡∏ß‡∏™‡∏≠‡∏á‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á' },
      { id: 'B2.5', text: 'B2.5 - ‡∏ú‡∏¥‡∏ß‡∏™‡∏≠‡∏á‡∏™‡∏µ‡∏Ñ‡∏•‡πâ‡∏≥' },
      { id: 'B03', text: 'B03 - ‡∏ú‡∏¥‡∏ß‡∏Ñ‡∏•‡πâ‡∏≥' }
    ];
    // ‡πÄ‡∏â‡∏î‡∏™‡∏µ‡∏´‡∏ô‡πâ‡∏≤ product card
    const optionsContainer = document.getElementById('optionsContainer');
    products.forEach(product => {
      const btn = document.createElement('button');
      btn.type = 'button';
      btn.className = 'option-btn';
      btn.textContent = product.text;
      btn.dataset.value = `${product.text} - 299 ‡∏ö‡∏≤‡∏ó`;
      btn.onclick = () => {
        document.querySelectorAll('#optionsContainer .option-btn').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        // sync ‡πÑ‡∏õ modal
        document.querySelectorAll('#modalOptionsContainer .option-btn').forEach(b => b.classList.remove('selected'));
        document.querySelector(`#modalOptionsContainer .option-btn[data-value="${btn.dataset.value}"]`).classList.add('selected');
        document.getElementById('productInput').value = btn.dataset.value;
      };
      optionsContainer.appendChild(btn);
    });
    // ‡πÄ‡∏â‡∏î‡∏™‡∏µ‡πÉ‡∏ô modal
    const modalOptionsContainer = document.getElementById('modalOptionsContainer');
    products.forEach(product => {
      const btn = document.createElement('button');
      btn.type = 'button';
      btn.className = 'option-btn';
      btn.textContent = product.text;
      btn.dataset.value = `${product.text} - 299 ‡∏ö‡∏≤‡∏ó`;
      btn.onclick = () => {
        document.querySelectorAll('#modalOptionsContainer .option-btn').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        // sync ‡πÑ‡∏õ product
        document.querySelectorAll('#optionsContainer .option-btn').forEach(b => b.classList.remove('selected'));
        document.querySelector(`#optionsContainer .option-btn[data-value="${btn.dataset.value}"]`).classList.add('selected');
        document.getElementById('productInput').value = btn.dataset.value;
      };
      modalOptionsContainer.appendChild(btn);
    });
    // Modal control
    const buyNowModal = document.getElementById('buyNowModal');
    const closeModalBtn = document.getElementById('closeModalBtn');
    const buyNowBtn = document.getElementById('buyNowBtn');
    const buyNowBtn2 = document.getElementById('buyNowBtn2');
    function openModal() {
      buyNowModal.style.display = 'flex';
      // Tracking InitiateCheckout ‡∏ó‡∏∏‡∏Å pixel
      if (window.fbq) fbq('track', 'InitiateCheckout');
      if (window.ttq) ttq.track('InitiateCheckout');
      if (window.gtag) gtag('event', 'begin_checkout', {
        value: 299.00,
        currency: 'THB'
      });
    }
    function closeModal() { buyNowModal.style.display = 'none'; }
    buyNowBtn.addEventListener('click', openModal);
    buyNowBtn2.addEventListener('click', openModal);
    closeModalBtn.addEventListener('click', closeModal);
    buyNowModal.addEventListener('click', (event) => {
      if (event.target === buyNowModal) { closeModal(); }
    });

    // ===== Pixel Event Functions =====
    function fbPurchaseEvent(orderValue = 299) {
      if (typeof fbq !== "undefined") {
        fbq('track', 'Purchase', { value: orderValue, currency: 'THB' });
      }
    }
    function tiktokPurchaseEvent(orderValue = 299) {
      if (typeof ttq !== "undefined") {
        ttq.track('CompletePayment', {
          contents: [{content_id:'MB-CONCEALER',content_type:'product',quantity:1}],
          value: orderValue,
          currency: 'THB'
        });
      }
    }
    function googleAdsPurchaseEvent(orderValue = 299) {
      if (typeof gtag !== "undefined") {
        gtag('event', 'conversion', {
          'send_to': 'AW-17035064059/53zPCNHE2OIaEPvl-bo_',
          'value': orderValue,
          'currency': 'THB'
        });
      }
    }
    function fbAddLineEvent() {
      if (typeof fbq !== "undefined") {
        fbq('track', 'Contact');
      }
      if (typeof ttq !== "undefined") {
        ttq.track('Contact');
      }
    }
    // Add event to all .line-btn
    document.getElementById('lineBtn1').addEventListener('click', fbAddLineEvent);
    document.getElementById('lineBtn2').addEventListener('click', fbAddLineEvent);
    // ===== End Pixel Event Functions =====

    // ‡∏™‡πà‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
    function sendOrderToSheet(event) {
      event.preventDefault();
      const orderForm = document.getElementById('orderForm');
      const submitButton = document.getElementById('submitBtn');
      const originalButtonText = submitButton.textContent;
      if (!document.getElementById('productInput').value) {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏â‡∏î‡∏™‡∏µ‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡πà‡∏∞!');
        return;
      }
      submitButton.disabled = true;
      submitButton.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...';
      const formData = new FormData(orderForm);
      // Make sure phone is sent as string with leading zero
      const phoneField = orderForm.querySelector('#phone');
      if (phoneField && phoneField.value && !phoneField.value.startsWith("'")) {
        formData.set('phone', "'" + phoneField.value);
      }
      formData.set("order_id", 'ORD-' + Date.now());
      fetch(GOOGLE_SHEET_WEB_APP_URL, {
        method: "POST", body: formData
      })
      .then(response => response.json())
      .then(data => {
        submitButton.disabled = false;
        submitButton.textContent = originalButtonText;
        if (data.result === 'success') {
          closeModal();
          orderForm.reset();
          document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
          document.getElementById('productInput').value = '';
          // Popup success
          const successPopup = document.getElementById('successPopup');
          successPopup.style.display = 'block';
          setTimeout(() => { successPopup.style.display = 'none'; }, 2400);

          // === Trigger All Purchase Pixels ===
          fbPurchaseEvent(299);
          tiktokPurchaseEvent(299);
          googleAdsPurchaseEvent(299);

        } else {
          alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + (data.message || '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏'));
        }
      })
      .catch(err => {
        submitButton.disabled = false;
        submitButton.textContent = originalButtonText;
        alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: " + err.message);
        console.error("Fetch Error:", err);
      });
    }
  </script>
</body>
</html>
